p: &p
  type: http
  health-check:
    enable: true
    url: https://www.gstatic.com/generate_204
    interval: 1800
  proxy: è®¢é˜…æ›´æ–°

proxy-providers:
  __PROVIDER_NAME__:
    <<: *p
    interval: 86400
    path: ./proxy_providers/1.yaml
    url: "__PROVIDER_URL__"

  __ONE_TIME_PROVIDER_NAME__:
    <<: *p
    path: ./proxy_providers/2.yaml
    url: "__ONE_TIME_PROVIDER_URL__"

mixed-port: 7890
ipv6: true
allow-lan: true
unified-delay: true
tcp-concurrent: true
log-level: silent
find-process-mode: off

external-controller: 0.0.0.0:9090
external-ui: WebUI
external-ui-url: "https://github.com/Zephyruso/zashboard/releases/latest/download/dist.zip"
secret: "__YOUR_SECRET__"

profile:
  store-selected: true
  store-fake-ip: true

sniffer:
  enable: true
  force-dns-mapping: true
  parse-pure-ip: true
  sniff:
    HTTP:
      ports: [80, 8080-8880]
    TLS:
      ports: [443, 5228, 8443]
    QUIC:
      ports: [443, 8443]
  skip-domain:
    - "Mijia Cloud"
    - "+.push.apple.com"

tun:
  enable: true
  stack: mixed
  device: Meta
  dns-hijack:
    - any:53
    - tcp://any:53
  auto-route: true
  strict-route: true
  auto-redirect: true
  auto-detect-interface: true

hosts:
  dns.alidns.com: [223.5.5.5, 223.6.6.6, 2400:3200::1, 2400:3200:baba::1]
  doh.pub: [1.12.12.12, 120.53.53.53, "2402:4e00::", "2402:4e00:1::"]
  cloudflare-dns.com:
    [1.1.1.1, 1.0.0.1, 2606:4700:4700::1111, 2606:4700:4700::1001]
  dns.google: [8.8.8.8, 8.8.4.4, 2001:4860:4860::8888, 2001:4860:4860::8844]

dns:
  enable: true
  cache-algorithm: arc
  ipv6: true
  listen: 0.0.0.0:1053
  enhanced-mode: fake-ip
  fake-ip-range: 28.0.0.1/8
  fake-ip-filter:
    - "rule-set:private_domain,fcm_domain,cn_domain,custom_direct"
  proxy-server-nameserver: &direct_dns
    - https://dns.alidns.com/dns-query#DIRECT&h3=true
    - https://doh.pub/dns-query#DIRECT&h3=false
  nameserver-policy:
    "rule-set:private_domain,fcm_domain,cn_domain,custom_direct": *direct_dns
  nameserver:
    - https://cloudflare-dns.com/dns-query#èŠ‚ç‚¹é€‰æ‹©
    - https://dns.google/dns-query#èŠ‚ç‚¹é€‰æ‹©

proxy-groups:
  - name: èŠ‚ç‚¹é€‰æ‹©
    type: select
    proxies:
      - ç¾Žå›½èŠ‚ç‚¹
      - æ—¥æœ¬èŠ‚ç‚¹
      - ç‹®åŸŽèŠ‚ç‚¹
      - å°æ¹¾èŠ‚ç‚¹
      - é¦™æ¸¯èŠ‚ç‚¹
      - å…¶ä½™èŠ‚ç‚¹
      - REJECT
      - DIRECT
    icon: "https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Rocket.png"

  - name: ç¾Žå›½èŠ‚ç‚¹
    type: select
    include-all-providers: true
    filter: "(?i)(ðŸ‡ºðŸ‡¸)"
    icon: "https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/United_States.png"

  - name: æ—¥æœ¬èŠ‚ç‚¹
    type: select
    include-all-providers: true
    filter: "(?i)(ðŸ‡¯ðŸ‡µ)"
    icon: "https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Japan.png"

  - name: è®¢é˜…æ›´æ–°
    type: select
    proxies:
      - èŠ‚ç‚¹é€‰æ‹©
      - DIRECT
    icon: "https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Round_Robin.png"

  - name: å¹¿å‘Šæ‹¦æˆª
    type: select
    proxies:
      - REJECT
      - PASS
      - REJECT-DROP
    icon: "https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Advertising.png"

  - name: WebRTC
    type: select
    proxies:
      - PASS
      - REJECT
      - REJECT-DROP
    icon: "https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Media.png"

  - name: PORN
    type: select
    proxies:
      - æ—¥æœ¬èŠ‚ç‚¹
      - å°æ¹¾èŠ‚ç‚¹
      - é¦™æ¸¯èŠ‚ç‚¹
      - ç‹®åŸŽèŠ‚ç‚¹
      - ç¾Žå›½èŠ‚ç‚¹
      - å…¶ä½™èŠ‚ç‚¹
      - DIRECT
    icon: "https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Pornhub.png"

  - name: TikTok
    type: select
    proxies:
      - èŠ‚ç‚¹é€‰æ‹©
      - ç¾Žå›½èŠ‚ç‚¹
      - æ—¥æœ¬èŠ‚ç‚¹
      - ç‹®åŸŽèŠ‚ç‚¹
      - å°æ¹¾èŠ‚ç‚¹
      - é¦™æ¸¯èŠ‚ç‚¹
      - å…¶ä½™èŠ‚ç‚¹
      - DIRECT
    icon: "https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/TikTok.png"

  - name: Google
    type: select
    proxies:
      - èŠ‚ç‚¹é€‰æ‹©
      - ç¾Žå›½èŠ‚ç‚¹
      - æ—¥æœ¬èŠ‚ç‚¹
      - ç‹®åŸŽèŠ‚ç‚¹
      - å°æ¹¾èŠ‚ç‚¹
      - é¦™æ¸¯èŠ‚ç‚¹
      - å…¶ä½™èŠ‚ç‚¹
      - DIRECT
    icon: "https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Google_Search.png"

  - name: è°·æ­ŒFCM
    type: select
    proxies:
      - DIRECT
      - èŠ‚ç‚¹é€‰æ‹©
    icon: "https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Mail.png"

  - name: å“”å“©å“”å“©
    type: select
    proxies:
      - DIRECT
      - å°æ¹¾èŠ‚ç‚¹
      - é¦™æ¸¯èŠ‚ç‚¹
    icon: "https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/bilibili.png"

  - name: æ¸¸æˆå¹³å°
    type: select
    proxies:
      - DIRECT
      - ç¾Žå›½èŠ‚ç‚¹
      - æ—¥æœ¬èŠ‚ç‚¹
      - ç‹®åŸŽèŠ‚ç‚¹
      - å°æ¹¾èŠ‚ç‚¹
      - é¦™æ¸¯èŠ‚ç‚¹
      - å…¶ä½™èŠ‚ç‚¹
    icon: "https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Game.png"

  - name: å¾®è½¯æœåŠ¡
    type: select
    proxies:
      - èŠ‚ç‚¹é€‰æ‹©
      - DIRECT
      - ç¾Žå›½èŠ‚ç‚¹
      - æ—¥æœ¬èŠ‚ç‚¹
      - ç‹®åŸŽèŠ‚ç‚¹
      - å°æ¹¾èŠ‚ç‚¹
      - é¦™æ¸¯èŠ‚ç‚¹
      - å…¶ä½™èŠ‚ç‚¹
    icon: "https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Microsoft.png"

  - name: è‹¹æžœæœåŠ¡
    type: select
    proxies:
      - èŠ‚ç‚¹é€‰æ‹©
      - DIRECT
      - ç¾Žå›½èŠ‚ç‚¹
      - æ—¥æœ¬èŠ‚ç‚¹
      - ç‹®åŸŽèŠ‚ç‚¹
      - å°æ¹¾èŠ‚ç‚¹
      - é¦™æ¸¯èŠ‚ç‚¹
      - å…¶ä½™èŠ‚ç‚¹
    icon: "https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Apple.png"

  - name: æ¼ç½‘ä¹‹é±¼
    type: select
    proxies:
      - èŠ‚ç‚¹é€‰æ‹©
      - DIRECT
      - ç¾Žå›½èŠ‚ç‚¹
      - æ—¥æœ¬èŠ‚ç‚¹
      - ç‹®åŸŽèŠ‚ç‚¹
      - å°æ¹¾èŠ‚ç‚¹
      - é¦™æ¸¯èŠ‚ç‚¹
      - å…¶ä½™èŠ‚ç‚¹
    icon: "https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Final.png"

  - name: ç‹®åŸŽèŠ‚ç‚¹
    type: select
    include-all-providers: true
    filter: "(?i)(ðŸ‡¸ðŸ‡¬)"
    icon: "https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Singapore.png"

  - name: å°æ¹¾èŠ‚ç‚¹
    type: select
    include-all-providers: true
    filter: "(?i)(ðŸ‡¹ðŸ‡¼|ðŸ‡¨ðŸ‡³)"
    icon: "https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Taiwan.png"

  - name: é¦™æ¸¯èŠ‚ç‚¹
    type: select
    include-all-providers: true
    filter: "(?i)(ðŸ‡­ðŸ‡°)"
    icon: "https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Hong_Kong.png"

  - name: å…¶ä½™èŠ‚ç‚¹
    type: select
    include-all-providers: true
    filter: "(?i)^(?!.*(?:ðŸ‡ºðŸ‡¸|ðŸ‡¯ðŸ‡µ|ðŸ‡¸ðŸ‡¬|ðŸ‡¹ðŸ‡¼|ðŸ‡¨ðŸ‡³|ðŸ‡­ðŸ‡°)).*"
    icon: "https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Global.png"

rule-anchor:
  classical: &classical
    type: http
    behavior: classical
    format: text
    interval: 86400
    proxy: èŠ‚ç‚¹é€‰æ‹©

  ip: &ip
    type: http
    behavior: ipcidr
    format: mrs
    interval: 86400
    proxy: èŠ‚ç‚¹é€‰æ‹©

  domain: &domain
    type: http
    behavior: domain
    format: mrs
    interval: 86400
    proxy: èŠ‚ç‚¹é€‰æ‹©

rule-providers:
  custom_direct:
    <<: *classical
    path: ./rule_providers/custom_direct.list
    url: "__CUSTOM_DIRECT_URL__"
  custom_proxy:
    <<: *classical
    path: ./rule_providers/custom_proxy.list
    url: "__CUSTOM_PROXY_URL__"

  webrtc:
    <<: *classical
    path: ./rule_providers/webrtc.list
    url: "https://raw.githubusercontent.com/GitMetaio/Surfing/main/box_bll/clash/rules/WebRTC.list"
  ads:
    <<: *domain
    path: ./rule_providers/ads.mrs
    url: "https://raw.githubusercontent.com/TG-Twilight/AWAvenue-Ads-Rule/main/Filters/AWAvenue-Ads-Rule-Clash.mrs"

  private_domain:
    <<: *domain
    path: ./rule_providers/private_domain.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/private.mrs"
  private_ip:
    <<: *ip
    path: ./rule_providers/private_ip.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/private.mrs"

  bilibili_domain:
    <<: *domain
    path: ./rule_providers/bilibili_domain.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/bilibili.mrs"
  bilibili_ip:
    <<: *ip
    path: ./rule_providers/bilibili_ip.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo-lite/geoip/bilibili.mrs"

  tiktok_domain:
    <<: *domain
    path: ./rule_providers/tiktok_domain.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/tiktok.mrs"

  steam_domain:
    <<: *domain
    path: ./rule_providers/steam_domain.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/steam.mrs"

  fcm_domain:
    <<: *domain
    path: ./rule_providers/fcm_domain.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/googlefcm.mrs"

  google_domain:
    <<: *domain
    path: ./rule_providers/google_domain.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/google.mrs"
  google_ip:
    <<: *ip
    path: ./rule_providers/google_ip.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/google.mrs"

  microsoft_domain:
    <<: *domain
    path: ./rule_providers/microsoft_domain.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/microsoft.mrs"

  apple_domain:
    <<: *domain
    path: ./rule_providers/apple_domain.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/apple.mrs"
  apple_ip:
    <<: *ip
    path: ./rule_providers/apple_ip.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo-lite/geoip/apple.mrs"

  porn_domain:
    <<: *domain
    path: ./rule_providers/porn_domain.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/category-porn.mrs"

  geolocation_not_cn:
    <<: *domain
    path: ./rule_providers/geolocation_not_cn.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/geolocation-!cn.mrs"
  cn_domain:
    <<: *domain
    path: ./rule_providers/cn_domain.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/cn.mrs"
  cn_ip:
    <<: *ip
    path: ./rule_providers/cn_ip.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/cn.mrs"

rules:
  - RULE-SET,custom_direct,DIRECT
  - RULE-SET,custom_proxy,èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,webrtc,WebRTC
  - RULE-SET,ads,å¹¿å‘Šæ‹¦æˆª
  - RULE-SET,private_domain,DIRECT
  - RULE-SET,bilibili_domain,å“”å“©å“”å“©
  - RULE-SET,tiktok_domain,TikTok
  - RULE-SET,steam_domain,æ¸¸æˆå¹³å°
  - RULE-SET,fcm_domain,è°·æ­ŒFCM
  - RULE-SET,google_domain,Google
  - DOMAIN-SUFFIX,windowsupdate.com,DIRECT
  - RULE-SET,microsoft_domain,å¾®è½¯æœåŠ¡
  - RULE-SET,apple_domain,è‹¹æžœæœåŠ¡
  - RULE-SET,porn_domain,PORN
  - RULE-SET,geolocation_not_cn,èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,cn_domain,DIRECT

  - RULE-SET,private_ip,DIRECT
  - RULE-SET,bilibili_ip,å“”å“©å“”å“©
  - RULE-SET,google_ip,Google
  - RULE-SET,apple_ip,è‹¹æžœæœåŠ¡
  - RULE-SET,cn_ip,DIRECT
  - MATCH,æ¼ç½‘ä¹‹é±¼
